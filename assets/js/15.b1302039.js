(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{428:function(s,t,n){"use strict";n.r(t);var a=n(18),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"mongodb命令行导入导出数据-账号认证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mongodb命令行导入导出数据-账号认证"}},[s._v("#")]),s._v(" Mongodb命令行导入导出数据(账号认证)")]),s._v(" "),n("h4",{attrs:{id:"mongoimport-的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mongoimport-的使用"}},[s._v("#")]),s._v(" mongoimport 的使用")]),s._v(" "),n("h5",{attrs:{id:"基本语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本语法"}},[s._v("#")]),s._v(" 基本语法：")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("mongoimport "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("options"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n// 可以使用mongoimport --help 获取mongoimport 的\n")])])]),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("语法：\n    mongoimport "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("options"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n介绍：\n    该命令可以将CSV，TSV或JSON文件数据导入MongoDB， 如果没有提供文件，则mongoimport从stdin（标准输入）读取。\n \n常规选项：\n    /help                               获取命令用法\n    /version                            获取工具版本\n \n详细选项：\n    /v, /verbose:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("level"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    /quiet                              隐藏所有日志输出\n \n连接选项：\n    /h, /host:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostname"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("              要连接的远程mongodb主机的地址\n    /port:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                      指定服务器端口（也可以使用--host hostname：port）\n \n验证选项：\n    /u，/username:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           指定用于身份验证的用户名\n    /p，/password:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           指定用于身份验证用户的密码\n \n名称选项：\n    /d, /db:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("database-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           指定要使用的数据库名称\n    /c, /collection:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("collection-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     指定要使用的collection集合的名称\n \n输入选项：\n    /f, /fields:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("field"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(","),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("field"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("*      指定要导入字段的字段名，以逗号作为分隔\n    /file:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                  指定要导入的数据文件，如果不指定，使用标准输入（stdin）\n    /headerline                         当导入数据文件类型为csv或tsv时，使用文件的第一行作字段名\n    /jsonArray                          当导入数据文件中的数据为json数组时，使用此选项\n    /type:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                      指定要导入的数据文件的类型json，csv或tsv（默认为json）\n    省略部分\n \n\n使用示例：\n\nmongoimport --db ML_OER --collection lecture --file /home/tmp/course_temp.json\n")])])]),n("h5",{attrs:{id:"认证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#认证"}},[s._v("#")]),s._v(" 认证")]),s._v(" "),n("blockquote",[n("p",[s._v('当开启auth后，执行mongodump，mongorestore时有如下错误”assertion: 18 { code: 18, ok: 0.0, errmsg: "auth fails" }“')])]),s._v(" "),n("h6",{attrs:{id:"导入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导入"}},[s._v("#")]),s._v(" 导入")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("mongoimport --host "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 --authenticationDatabase admin --port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" -u root -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" --db  zhibo -c user_watched --type json --file ./watched.json\n")])])]),n("h6",{attrs:{id:"导出"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导出"}},[s._v("#")]),s._v(" 导出")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("mongoexport --host "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 --port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" --db zhibo --collection platefrom_data --out  ./plateform.json\n")])])]),n("h4",{attrs:{id:"导入数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导入数据"}},[s._v("#")]),s._v(" 导入数据")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、导出工具：mongoexport\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、概念：\n        mongoDB中的mongoexport工具可以把一个collection导出成JSON格式或CSV格式的文件。可以通过参数指定导出的数据项，也可以根据指定的条件导出数据。\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、语法：\n        mongoexport -d dbname -c collectionname -o "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" --type json/csv -f field\n        参数说明：\n            -d ：数据库名\n            -c ：collection名\n            -o ：输出的文件名\n            --type ： 输出的格式，默认为json\n            -f ：输出的字段，如果-type为csv，则需要加上-f "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"字段名"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、示例：\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mongoexport -d mongotest -c "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" -o /home/python/Desktop/mongoDB/users.json --type json -f  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id,user_id,user_name,age,status"')]),s._v("\n \n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、数据导入：mongoimport\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、语法：\n        mongoimport -d dbname -c collectionname --file filename --headerline --type json/csv -f field\n        参数说明：\n            -d ：数据库名\n            -c ：collection名\n            --type ：导入的格式默认json\n            -f ：导入的字段名\n            --headerline ：如果导入的格式是csv，则可以使用第一行的标题作为导入的字段\n            --file ：要导入的文件\n \n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、示例：\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mongoimport -d mongotest -c "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" --file /home/mongodump/articles.json --type json\n \n-------------------MongoDB备份与恢复-------------------\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、MongoDB数据库备份\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、语法：\n        mongodump -h dbhost -d dbname -o dbdirectory\n        参数说明：\n            -h： MongDB所在服务器地址，例如：127.0.0.1，当然也可以指定端口号：127.0.0.1:27017\n            -d： 需要备份的数据库实例，例如：test\n            -o： 备份的数据存放位置，例如：/home/mongodump/，当然该目录需要提前建立，这个目录里面存放该数据库实例的备份数据。\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、实例：\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /home/momgodump/\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /home/momgodump\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mongodump -h "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".17.129:27017 -d itcast -o /home/mongodump/\n        -\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、MongoDB数据库恢复\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、语法：\n        mongorestore -h dbhost -d dbname --dir dbdirectory\n \n        参数或名：\n            -h： MongoDB所在服务器地址\n            -d： 需要恢复的数据库实例，例如：test，当然这个名称也可以和备份时候的不一样，比如test2\n            --dir： 备份数据所在位置，例如：/home/mongodump/itcast/\n            --drop： 恢复的时候，先删除当前数据，然后恢复备份的数据。就是说，恢复后，备份后添加修改的数据都会被删除，慎用！\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、实例：\n    mongorestore -h "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".17.129:27017 -d itcast_restore --dir /home/mongodump/itcast/\n \n \n导入.dat\nmongoimport -d "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" -c students students.dat \n\n-d "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" 指的是导入test 数据库"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("database"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n-c students 指的是导入students表 collections"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tables"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);